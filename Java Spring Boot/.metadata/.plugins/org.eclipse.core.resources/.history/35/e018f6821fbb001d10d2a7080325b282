package com.example.demo.controllers;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import com.example.demo.entities.Category;
import com.example.demo.entities.Product;
import com.example.demo.entities.ProductReg;
import com.example.demo.entities.Question;
import com.example.demo.entities.User;
import com.example.demo.entities.UserReg;
import com.example.demo.entities.UserType;
import com.example.demo.services.CategoryService;
import com.example.demo.services.ProductService;
import com.example.demo.services.UserService;

@CrossOrigin(origins = "http://localhost:3000")
@RestController
public class ProductController {
	
	@Autowired
	ProductService pserv;
	
	@Autowired
	CategoryService cserv;
	
	@Autowired
	UserService userv;
	
	@PostMapping("/regproduct")
	public Product regSeller(@RequestBody ProductReg product)
	{
		Category category_id= cserv.getById(Integer.parseInt(product.getCategory_id()));
		System.out.println(category_id.getCategory_id() + " " + category_id.getCategory_name());
		User seller_id=userv.getById(product.getSeller_id());
		//UserType user_type_id=utserv.getUserType(seller.getUser_type_id());
		//System.out.println(seller.getUser_type_id() + " " +seller.getQ_id()+ " " + seller.getPassword() + seller.getState());
		//Question q_id = qserv.getQuestion(seller.getQ_id());
		//String product_name, Category category_id, String description, float base_price, User seller_id,
		//String status
		Product p=new Product(product.getProduct_name(),category_id,product.getDescription(),Float.parseFloat(product.getBase_price()),seller_id,product.getStatus());
		
//		User u=new User(user_type_id,seller.getFname(),seller.getLname(),seller.getEmail(),seller.getMobile(),seller.getState(),
//				seller.getCity(),seller.getPincode(),seller.getAddress(),seller.getGender(),seller.getPan_card_number(),
//				seller.getAccount_status(),q_id,seller.getAnswer(),seller.getUsername(),seller.getPassword());
//				UserType user_type_id, String fname, String lname, String email, String mobile, String state,
//				String city, String pincode, String address, String gender, String pan_card_number, String account_status,
//				Question q_id, String answer, String username, String password
		return pserv.saveProduct(p);
	}

}
